CREATE SCHEMA PUBLIC AUTHORIZATION DBA
CREATE MEMORY TABLE CONTRACT(CONTRACTS_ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,BEGINDATE DATE,ENDDATE DATE,APPRENTICE_USER_ID INTEGER,INTERNSHIPSUPERVISOR_USER_ID INTEGER,SUPERVISINGTEACHER_USER_ID INTEGER)
CREATE MEMORY TABLE COURSESESSION(SESSIONS_ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,ASSIGNMENTSLINK VARCHAR(255),ENDDATE DATE,STARTDATE DATE,TYPE INTEGER,FORMATION_FORMATION_ID INTEGER,TEACHER_USER_ID INTEGER)
CREATE MEMORY TABLE FORMATION(FORMATION_ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,NAME VARCHAR(255),PARENTFORMATION_FORMATION_ID INTEGER,PROMOTION_PROMOTION_ID INTEGER,CONSTRAINT FKE36CA8918FC9ADBA FOREIGN KEY(PARENTFORMATION_FORMATION_ID) REFERENCES FORMATION(FORMATION_ID))
CREATE MEMORY TABLE PERMISSION(PERMISSIONS_ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,NAME VARCHAR(255))
CREATE MEMORY TABLE PERMISSION_USERS(SPECIALPERMISSIONS_PERMISSIONS_ID INTEGER NOT NULL,USERS_USER_ID INTEGER NOT NULL,PRIMARY KEY(SPECIALPERMISSIONS_PERMISSIONS_ID,USERS_USER_ID),CONSTRAINT FK17EC3398EE3C671 FOREIGN KEY(SPECIALPERMISSIONS_PERMISSIONS_ID) REFERENCES PERMISSION(PERMISSIONS_ID))
CREATE MEMORY TABLE PROMOTION(PROMOTION_ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,NAME VARCHAR(255),PROMOTIONYEAR INTEGER,RESPONSIBLE_USER_ID INTEGER)
CREATE MEMORY TABLE USERGROUP(GROUP_ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,NAME VARCHAR(255))
CREATE MEMORY TABLE USERGROUP_PERMISSION(GROUPS_GROUP_ID INTEGER NOT NULL,PERMISSIONS_PERMISSIONS_ID INTEGER NOT NULL,PRIMARY KEY(GROUPS_GROUP_ID,PERMISSIONS_PERMISSIONS_ID),CONSTRAINT FK403DB9BA10156AF8 FOREIGN KEY(PERMISSIONS_PERMISSIONS_ID) REFERENCES PERMISSION(PERMISSIONS_ID),CONSTRAINT FK403DB9BA7FFB0E02 FOREIGN KEY(GROUPS_GROUP_ID) REFERENCES USERGROUP(GROUP_ID))
CREATE MEMORY TABLE USERGROUP_USERS(GROUPS_GROUP_ID INTEGER NOT NULL,USERS_USER_ID INTEGER NOT NULL,PRIMARY KEY(GROUPS_GROUP_ID,USERS_USER_ID),CONSTRAINT FK76BA933D7FFB0E02 FOREIGN KEY(GROUPS_GROUP_ID) REFERENCES USERGROUP(GROUP_ID))
CREATE MEMORY TABLE USERPROFILE(USER_ID INTEGER NOT NULL PRIMARY KEY,ADDRESS VARCHAR(255),BIRTHDATE DATE,EMAIL VARCHAR(255),FIRSTNAME VARCHAR(255),GENDER INTEGER,LASTNAME VARCHAR(255),PHONENUMBER VARCHAR(255),PHOTOPATH VARCHAR(255),USERPROFILETYPE INTEGER,CONTRACT_CONTRACTS_ID INTEGER,PROMOTION_PROMOTION_ID INTEGER,CONSTRAINT SYS_CT_122 UNIQUE(USER_ID),CONSTRAINT FK3EFA133E4D33089E FOREIGN KEY(PROMOTION_PROMOTION_ID) REFERENCES PROMOTION(PROMOTION_ID),CONSTRAINT FK3EFA133E2604E2F0 FOREIGN KEY(CONTRACT_CONTRACTS_ID) REFERENCES CONTRACT(CONTRACTS_ID))
CREATE MEMORY TABLE USERS(USER_ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,PASSWORD VARCHAR(255),STAFF BOOLEAN,SUPERUSER BOOLEAN,USERNAME VARCHAR(255),CONSTRAINT SYS_CT_126 UNIQUE(USERNAME))
ALTER TABLE CONTRACT ADD CONSTRAINT FKE20F753230F0D20C FOREIGN KEY(INTERNSHIPSUPERVISOR_USER_ID) REFERENCES USERPROFILE(USER_ID)
ALTER TABLE CONTRACT ADD CONSTRAINT FKE20F75325624331B FOREIGN KEY(SUPERVISINGTEACHER_USER_ID) REFERENCES USERPROFILE(USER_ID)
ALTER TABLE CONTRACT ADD CONSTRAINT FKE20F7532F1B1B847 FOREIGN KEY(APPRENTICE_USER_ID) REFERENCES USERPROFILE(USER_ID)
ALTER TABLE COURSESESSION ADD CONSTRAINT FK7A925DB6BB42FB8 FOREIGN KEY(TEACHER_USER_ID) REFERENCES USERPROFILE(USER_ID)
ALTER TABLE COURSESESSION ADD CONSTRAINT FK7A925DB9BA4E090 FOREIGN KEY(FORMATION_FORMATION_ID) REFERENCES FORMATION(FORMATION_ID)
ALTER TABLE FORMATION ADD CONSTRAINT FKE36CA8914D33089E FOREIGN KEY(PROMOTION_PROMOTION_ID) REFERENCES PROMOTION(PROMOTION_ID)
ALTER TABLE PERMISSION_USERS ADD CONSTRAINT FK17EC3398128CEC88 FOREIGN KEY(USERS_USER_ID) REFERENCES USERS(USER_ID)
ALTER TABLE PROMOTION ADD CONSTRAINT FK47CF1C83475156CC FOREIGN KEY(RESPONSIBLE_USER_ID) REFERENCES USERPROFILE(USER_ID)
ALTER TABLE USERGROUP_USERS ADD CONSTRAINT FK76BA933D128CEC88 FOREIGN KEY(USERS_USER_ID) REFERENCES USERS(USER_ID)
ALTER TABLE CONTRACT ALTER COLUMN CONTRACTS_ID RESTART WITH 3
ALTER TABLE COURSESESSION ALTER COLUMN SESSIONS_ID RESTART WITH 1
ALTER TABLE FORMATION ALTER COLUMN FORMATION_ID RESTART WITH 1
ALTER TABLE PERMISSION ALTER COLUMN PERMISSIONS_ID RESTART WITH 1
ALTER TABLE PROMOTION ALTER COLUMN PROMOTION_ID RESTART WITH 1
ALTER TABLE USERGROUP ALTER COLUMN GROUP_ID RESTART WITH 1
ALTER TABLE USERS ALTER COLUMN USER_ID RESTART WITH 7
CREATE USER SA PASSWORD ""
GRANT DBA TO SA
SET WRITE_DELAY 10
SET SCHEMA PUBLIC
INSERT INTO CONTRACT VALUES(1,NULL,NULL,1,2,3)
INSERT INTO CONTRACT VALUES(2,NULL,NULL,4,5,6)
INSERT INTO USERPROFILE VALUES(1,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,1,NULL)
INSERT INTO USERPROFILE VALUES(2,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,1,1,NULL)
INSERT INTO USERPROFILE VALUES(3,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,2,1,NULL)
INSERT INTO USERPROFILE VALUES(4,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0,2,NULL)
INSERT INTO USERPROFILE VALUES(5,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,1,2,NULL)
INSERT INTO USERPROFILE VALUES(6,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,2,2,NULL)
INSERT INTO USERS VALUES(1,NULL,FALSE,FALSE,NULL)
INSERT INTO USERS VALUES(2,NULL,FALSE,FALSE,NULL)
INSERT INTO USERS VALUES(3,NULL,FALSE,FALSE,NULL)
INSERT INTO USERS VALUES(4,'',FALSE,FALSE,'user4ContractGetUser')
INSERT INTO USERS VALUES(5,'',FALSE,FALSE,'user24ContractGetUser')
INSERT INTO USERS VALUES(6,'',FALSE,FALSE,'user34ContractGetUser')
